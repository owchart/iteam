<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <script type="text/javascript" language="gaia">
      {按钮点击}
      function onclick()
      {
      var(sender, '', pName, '');
      getsender(sender);
      getproperty(pName, sender, 'name');
      if(str.equals(pName, 'btnCancel')){ closewindow();};
      if(str.equals(pName, 'btnOK'))
      {
        if(savemodifyplan())
        {
          closewindow();
        }
      }
      }

      {窗体加载}
      function onload()
      {
      var(id, '', name, '' , stime, '', member, '', cmd, '');
      plan.getselected(id, name, stime, member, cmd);
      setproperty('lblID', 'text', id);
      setproperty('txtName', 'text', name);
      setproperty('dtpNextTime', 'text', stime);
	  setproperty('txtMember', 'text', member);
      setproperty('txtScript', 'text', cmd);
      }

      {修改计划}
      function savemodifyplan()
      {
      var(sender, '', id, '', name, '' , stime, '', cmd, '', member, '');
      getsender(sender);
      getproperty(id, 'lblID', 'text');
      getproperty(name, 'txtName', 'text');
      getproperty(stime, 'dtpNextTime', 'text');
      getproperty(cmd, 'txtScript', 'text');
	  getproperty(member, 'txtMember', 'text');
      if(str.length(name) = 0)
      {
        alert('请填写名称!','提示');
        return(0);
      }
      if(str.length(stime) = 0)
      {
        alert('请填写时间!','提示');
        return(0);
      }
      if(str.length(member) = 0)
      {
        alert('请填写相关人员!','提示');
        return(0);
      }
      if(str.length(cmd,) = 0)
      {
        alert('请填写结果!','提示');
        return(0);
      }
      plan.modify(id, name, stime, member, cmd);
      return(1);
      }
    </script>
  </head>
  <body>
    <div type="usercontrol" cid="windowex" name="windowModifyPlan" size="374,430" location="3,3" text="修改任务" onload="onload();">
      <label name="Label1" location="19,40" size="46,20" text="名称：" />
      <label name="lblID" location="19,38" size="46,20" visible="false" />
      <input type="text" name="txtName" location="97,38" size="246,21" text="新的计划" />
      <input type="usercontrol" cid="ribbonbutton" name="btnOK" location="147,386" size="79,28" Text="确定" onclick="onclick();" />
      <input type="usercontrol" cid="ribbonbutton" name="btnCancel" location="245,386" size="79,28" Text="关闭" onclick="onclick();" />
      <label name="Label" text="结束时间：" location="19,79" size="73,17" />
      <datetimepicker name="dtpNextTime" location="97,76" size="246,20" />
      <label name="Label2" text="相关人员：" location="19,117" size="73,17" />
      <input type="text" name="txtMember" location="97,114" size="246,20" />
      <label name="Label3" location="19,150" size="73,44" text="最终结果：" />
      <input type="text" name="txtScript" location="15,182" size="345,184" text="" multiline="true" tabstop="false" wordwrap="true" />
    </div>
  </body>
</html>